<html>

<div id="content">
	<input id="text"></input>
	<input type="submit" id="submit">
</div>

<script type="text/javascript">
const textNode = document.getElementById('text');
const button = document.getElementById('submit');
const content = document.getElementById('content');

//NOTE: this does the basic export job, but i've since integrated this code into province_ui_setup.js as of 14/06/24
//see PHPProvinceExport() on line 356 
//that was to get movement links between provinces as well
button.addEventListener('click', function (evt) {
	//console.log("clicked: ");
	//console.log(textNode.value);
	if(!textNode.value)
	{
		//return;
	}
	const provinces = JSON.parse(textNode.value);
	console.log(provinces);
	
	var output_php_array = "[";
	var first_element = true;
	for(var prov_id in provinces)
	{
		if(first_element)
		{
			first_element = false;
		}
		else
		{
			output_php_array += ",";
		}
			
		var cur_province = provinces[prov_id];
		
		//copy across only the properties that we want
		output_php_array += "[\"id\"=>" + prov_id + "," + "\"type\" => " + cur_province.type + ",\"movement_links\" => []"
	}
	output_php_array += "]";
	//textNode.remove();
	//button.remove();
	content.innerText = output_php_array;
});			

</script>

</html>